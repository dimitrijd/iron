FROM linuxserver/code-server

USER $USER_NAME
# terminal colors with xterm
ENV TERM xterm
# set the zsh theme
ENV ZSH_THEME agnoster

RUN apt-get update &&  \
    apt-get install -y --no-install-recommends apt-transport-https wget curl vim 
RUN apt-get update &&  \
    DEBIAN_FRONTEND=noninteractive apt-get install -y --reinstall tzdata nodejs 
RUN touch /root/.zshrc
RUN wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.38.0/install.sh | bash 
WORKDIR /root
RUN apt-get install -y zsh 
RUN chsh -s /usr/bin/zsh root
RUN wget https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | zsh || true
WORKDIR /
EXPOSE 3000
EXPOSE 8443

RUN apt-get update && \
    apt-get install -y sudo curl git-core gnupg \
    linuxbrew-wrapper locales nodejs zsh wget nano \
    fonts-powerline && \
    locale-gen en_US.UTF-8 && \
    adduser --quiet --disabled-password \
    --shell /bin/zsh --home /home/devuser \
    --gecos "User" devuser && \
    echo "devuser:<a href="mailto://p@ssword1">p@ssword1</a>" | \
    chpasswd &&  usermod -aG sudo devuser
ENV TERM xterm
ENV ZSH_THEME agnoster
WORKDIR /home/devuser
ENTRYPOINT ["zsh"]

# DONE add nvm
# DONE add zsh
# issue add oh-my-zsh due to .config home directory - need to decide wherE
# add bells&whistles zshell
# code-server --open >/dev/null 2>&1 &
# add vscoder extension and --open and code . simlar to non-autooder
# add global packages from npm (debug etc)
# add welcome intro 
# export TZ="/usr/share/zoneinfo/America/Los_Angeles"
# add shell function to avoid port collision
# express
# handlebars
# same username
# same userID/groupID
#9 3.823  mongodb-org : Depends: mongodb-org-shell but it is not going to be installed
#9 3.823                Depends: mongodb-org-server but it is not going to be installed
#9 3.823                Depends: mongodb-org-mongos but it is not going to be installed



#/etc/services.d/code-server
#/usr/local/share/.config/yarn/global/node_modules/.bin/code-server
#/usr/local/share/.config/yarn/global/node_modules/code-server
#/usr/local/bin/code-server

#[program:mongod]
#command=/usr/bin/mongod --config /etc/mongod.conf
#stdout_logfile=/var/log/supervisor/%(program_name)s.log
#stderr_logfile=/var/log/supervisor/%(program_name)s.log
#autorestart=true
#user=mongodb
#priority=10


